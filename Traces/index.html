<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://curts0.github.io/PyTabular/Traces/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Traces - PyTabular</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Traces";
        var mkdocs_page_input_path = "Traces.md";
        var mkdocs_page_url = "/PyTabular/Traces/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> PyTabular
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Tabular/">Main Tabular Class</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Refreshes/">Refreshing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Queries/">Querying</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Table/">Tables</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Partition/">Partitions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Column/">Columns</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Measure/">Measures</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Traces</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#basetrace">BaseTrace</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#start">.start</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#stop">.stop</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#drop">.drop</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#build">.build</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#add">.add</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#update">.update</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#init">.init</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#refreshtrace">RefreshTrace</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#init_1">.init</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#querymonitor">QueryMonitor</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#init_2">.init</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_refresh_handler">_refresh_handler</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_query_monitor_handler">_query_monitor_handler</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Best%20Practice%20Analyzer/">Best Practice Analyzer</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Tabular%20Editor%202/">Tabular Editor</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../PBI%20Helper/">PBI Helper</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Logic%20Utils/">Logic Utils</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../contributing/">Contributing</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">PyTabular</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Traces</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="_1"></h1>
<h2 id="basetrace">BaseTrace</h2>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L21">source</a></p>
<pre><code class="language-python">BaseTrace(
   tabular_class, trace_events: List[TraceEvent],
   trace_event_columns: List[TraceColumn], handler: Callable
)
</code></pre>
<hr />
<p>Generates trace to be run on Server.</p>
<p>This is the base class to customize the type of Trace you are looking for.
It's recommended to use the out of the box traces built.
It's on the roadmap to have an intuitive way to build traces for users.</p>
<p><strong>Methods:</strong></p>
<h3 id="start">.start</h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L130">source</a></p>
<pre><code class="language-python">.start()
</code></pre>
<hr />
<p>Call when you want to start the trace.</p>
<p><strong>Returns</strong></p>
<ul>
<li><strong>None</strong>  : Returns None.
    Unless unsuccessful then it will return the error from Server.</li>
</ul>
<h3 id="stop">.stop</h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L140">source</a></p>
<pre><code class="language-python">.stop()
</code></pre>
<hr />
<p>Call when you want to stop the trace.</p>
<p><strong>Returns</strong></p>
<ul>
<li><strong>None</strong>  : Returns None.
    Unless unsuccessful then it will return the error from Server.</li>
</ul>
<h3 id="drop">.drop</h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L150">source</a></p>
<pre><code class="language-python">.drop()
</code></pre>
<hr />
<p>Call when you want to drop the trace.</p>
<p><strong>Returns</strong></p>
<ul>
<li><strong>None</strong>  : Returns None. Unless unsuccessful,
    then it will return the error from Server.</li>
</ul>
<h3 id="build">.build</h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L72">source</a></p>
<pre><code class="language-python">.build()
</code></pre>
<hr />
<p>Run on init.</p>
<p>This will take the inputed arguments for the class
and attempt to build the Trace.</p>
<p><strong>Returns</strong></p>
<ul>
<li><strong>bool</strong>  : True if successful</li>
</ul>
<h3 id="add">.add</h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L108">source</a></p>
<pre><code class="language-python">.add()
</code></pre>
<hr />
<p>Runs on init. Adds built trace to the Server.</p>
<p><strong>Returns</strong></p>
<ul>
<li><strong>int</strong>  : Return int of placement in Server.Traces.get_Item(int).</li>
</ul>
<h3 id="update">.update</h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L117">source</a></p>
<pre><code class="language-python">.update()
</code></pre>
<hr />
<p>Runs on init. Syncs with Server.</p>
<p><strong>Returns</strong></p>
<ul>
<li><strong>None</strong>  : Returns None.
    Unless unsuccessful then it will return the error from Server.</li>
</ul>
<h3 id="init">.<strong>init</strong></h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L29">source</a></p>
<pre><code class="language-python">.__init__(
   tabular_class, trace_events: List[TraceEvent],
   trace_event_columns: List[TraceColumn], handler: Callable
)
</code></pre>
<hr />
<p>This will <code>build()</code>, <code>add()</code>, and <code>update()</code> the trace to model.</p>
<p>It will also register the dropping on the trace on exiting python.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>tabular_class</strong> (Tabular) : The model you want the trace for.</li>
<li><strong>trace_events</strong> (List[TraceEvent]) : The TraceEvents you want have in your trace.
    From Microsoft.AnalysisServices.TraceEventClass.</li>
<li><strong>trace_event_columns</strong> (List[TraceColumn]) : The trace event columns you want in your trace.
    From Microsoft.AnalysisServices.TraceColumn.</li>
<li><strong>handler</strong> (Callable) : The <code>handler</code> is a function that will take in two args.
    The first arg is <code>source</code> and it is currently unused.
    The second is arg is <code>args</code> and here
    is where you can access the results of the trace.</li>
</ul>
<hr />
<h2 id="refreshtrace">RefreshTrace</h2>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L271">source</a></p>
<pre><code class="language-python">RefreshTrace(
   tabular_class,
   trace_events: List[TraceEvent] = [TraceEventClass.ProgressReportBegin,
   TraceEventClass.ProgressReportCurrent, TraceEventClass.ProgressReportEnd,
   TraceEventClass.ProgressReportError],
   trace_event_columns: List[TraceColumn] = [TraceColumn.EventSubclass,
   TraceColumn.CurrentTime, TraceColumn.ObjectName, TraceColumn.ObjectPath,
   TraceColumn.DatabaseName, TraceColumn.SessionID, TraceColumn.TextData,
   TraceColumn.EventClass, TraceColumn.ProgressTotal],
   handler: Callable = _refresh_handler
)
</code></pre>
<hr />
<p>Subclass of <code>BaseTrace()</code>. Usefull for monitoring refreshes.</p>
<p>This is the default trace that is run on refreshes.
It will output all the various details into <code>logger()</code>.
See <code>_refresh_handler()</code> for more details on what gets
put into <code>logger()</code>.</p>
<p><strong>Methods:</strong></p>
<h3 id="init_1">.<strong>init</strong></h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L280">source</a></p>
<pre><code class="language-python">.__init__(
   tabular_class,
   trace_events: List[TraceEvent] = [TraceEventClass.ProgressReportBegin,
   TraceEventClass.ProgressReportCurrent, TraceEventClass.ProgressReportEnd,
   TraceEventClass.ProgressReportError],
   trace_event_columns: List[TraceColumn] = [TraceColumn.EventSubclass,
   TraceColumn.CurrentTime, TraceColumn.ObjectName, TraceColumn.ObjectPath,
   TraceColumn.DatabaseName, TraceColumn.SessionID, TraceColumn.TextData,
   TraceColumn.EventClass, TraceColumn.ProgressTotal],
   handler: Callable = _refresh_handler
)
</code></pre>
<hr />
<p>Init will extend through <code>BaseTrace()</code>. But pass through specific params.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>tabular_class</strong> (Tabular) : This is your <code>Tabular()</code> class.</li>
<li><strong>trace_events</strong> (List[TraceEvent], optional) : Defaults to [
    TraceEventClass.ProgressReportBegin,
    TraceEventClass.ProgressReportCurrent, TraceEventClass.ProgressReportEnd,
    TraceEventClass.ProgressReportError, ].</li>
<li><strong>trace_event_columns</strong> (List[TraceColumn], optional) : Defaults to
    [ TraceColumn.EventSubclass, TraceColumn.CurrentTime,
    TraceColumn.ObjectName, TraceColumn.ObjectPath, TraceColumn.DatabaseName,
    TraceColumn.SessionID, TraceColumn.TextData, TraceColumn.EventClass,
    TraceColumn.ProgressTotal, ].</li>
<li><strong>handler</strong> (Callable, optional) : <em>description</em>. Defaults to _refresh_handler.</li>
</ul>
<hr />
<h2 id="querymonitor">QueryMonitor</h2>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L343">source</a></p>
<pre><code class="language-python">QueryMonitor(
   tabular_class, trace_events: List[TraceEvent] = [TraceEventClass.QueryEnd],
   trace_event_columns: List[TraceColumn] = [TraceColumn.EventSubclass,
   TraceColumn.StartTime, TraceColumn.EndTime, TraceColumn.Duration,
   TraceColumn.Severity, TraceColumn.Error, TraceColumn.NTUserName,
   TraceColumn.DatabaseName, TraceColumn.ApplicationName, TraceColumn.TextData],
   handler: Callable = _query_monitor_handler
)
</code></pre>
<hr />
<p>Subclass of <code>BaseTrace()</code>. Usefull for monitoring queries.</p>
<p>The default handler for <code>QueryMonitor()</code> shows full query in <code>logger.debug()</code>.
So you will need to set your logger to <code>debug()</code> if you would like to see them.
Otherwise, will show basic info on who/what is querying.</p>
<p><strong>Methods:</strong></p>
<h3 id="init_2">.<strong>init</strong></h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L351">source</a></p>
<pre><code class="language-python">.__init__(
   tabular_class, trace_events: List[TraceEvent] = [TraceEventClass.QueryEnd],
   trace_event_columns: List[TraceColumn] = [TraceColumn.EventSubclass,
   TraceColumn.StartTime, TraceColumn.EndTime, TraceColumn.Duration,
   TraceColumn.Severity, TraceColumn.Error, TraceColumn.NTUserName,
   TraceColumn.DatabaseName, TraceColumn.ApplicationName, TraceColumn.TextData],
   handler: Callable = _query_monitor_handler
)
</code></pre>
<hr />
<p>Init will extend through to BaseTrace, but pass through specific params.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>tabular_class</strong> (Tabular) : This is your <code>Tabular()</code> class.
    All that will need to provided to successfully init.</li>
<li><strong>trace_events</strong> (List[TraceEvent], optional) : Defaults to [TraceEventClass.QueryEnd].</li>
<li><strong>trace_event_columns</strong> (List[TraceColumn], optional) : Defaults to
    [ TraceColumn.EventSubclass, TraceColumn.StartTime, TraceColumn.EndTime,
    TraceColumn.Duration, TraceColumn.Severity, TraceColumn.Error,
    TraceColumn.NTUserName, TraceColumn.DatabaseName, TraceColumn.ApplicationName,
    TraceColumn.TextData, ].</li>
<li><strong>handler</strong> (Callable, optional) : Defaults to <code>_query_monitor_handler()</code>.</li>
</ul>
<hr />
<h3 id="_refresh_handler">_refresh_handler</h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L192">source</a></p>
<pre><code class="language-python">._refresh_handler(
   source, args
)
</code></pre>
<hr />
<p>Default handler called when <code>RefreshTrace()</code> is used.</p>
<p>It will log various steps of the refresh process.
Mostly will output the current # of rows read.
Will output <code>logger.warning()</code> if refresh produces zero rows,
or if a switching dictionary event occurs.
The rest of the EventSubclass' will output the raw text.
For example, TabularSequencePoint, TabularRefresh, Process,
Vertipaq, CompressSegment, TabularCommit, RelationshipBuildPrepare,
AnalyzeEncodeData, ReadData. If there is anything else not prebuilt
out for logging, it will dump the arguments int <code>logger.debug()</code>.</p>
<hr />
<h3 id="_query_monitor_handler">_query_monitor_handler</h3>
<p><a href="https://github.com/Curts0/PyTabular/blob/master/pytabular/tabular_tracing.py/#L320">source</a></p>
<pre><code class="language-python">._query_monitor_handler(
   source, args
)
</code></pre>
<hr />
<p>Default function used with the <code>Query_Monitor()</code> trace.</p>
<p>Will return query type, user (effective user), application, start time,
end time, and total seconds of query in <code>logger.info()</code>.
To see full query set logger to debug <code>logger.setLevel(logging.DEBUG)</code>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Measure/" class="btn btn-neutral float-left" title="Measures"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Best%20Practice%20Analyzer/" class="btn btn-neutral float-right" title="Best Practice Analyzer">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Measure/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Best%20Practice%20Analyzer/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
